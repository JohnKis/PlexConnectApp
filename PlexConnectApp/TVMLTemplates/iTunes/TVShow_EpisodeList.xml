<?xml version="1.0" encoding="UTF-8" ?>
<!--
Copyright (C) 2015 Baa. All rights reserved.
See LICENSE.txt for this sampleâ€™s licensing information
-->
<document>
	<productBundleTemplate>
		<background>
		</background>
		<banner>
			<stack>
				<title id="seasonTitle">{{ parentTitle }}</title>
				<row>
					<subtitle>{{ title }}</subtitle>
				</row>
				<row>
					<text>{{ parentGenre }}</text>
					<text>{{ episodes.first.year }}</text>
					<badge src="resource://{{ contentRating }}" class="badge" style="tv-tint-color: rgb(255,255,255)" />
					{{# HD}}
                    <badge src="resource://hd" class="badge" style="tv-tint-color: rgb(255,255,255)" />
                    {{/ HD}}
				</row>
				<description allowsZooming="true" moreLabel="more" onSelect="Presenter.loadContextWithData('TVShow_SeasonListDescription', { title: '{{ HTMLEscape(parentTitle) }}, {{ HTMLEscape(title) }}', description: '{{ HTMLEscape(summary) }}'})"><![CDATA[{{ summary }}]]></description>
				<!-- TODO -->
				<row id="controls">
					<buttonLockup onSelect="videoPlayer.play('{{ _.pmsId }}', '{{ nextEpisode.path }}')">
						<badge src="resource://button-play" />
                        <title>{{ nextEpisode.description }}</title>
					</buttonLockup>
                    <buttonLockup onSelect="Presenter.loadContextWithData('MarkAsWatchedContext', {view: '{{ view }}', showDescription: true, watched: !{{watched}}, path: '{{ path }}', title: '{{ HTMLEscape(parentTitle) }}, {{ HTMLEscape(title) }}', pmsId: '{{ _.pmsId }}', elements: '[\'seasonTitle\', \'controls\', \'episodes\']' })">
                        <badge src="{{ _.imagePath }}/markas{{#watched}}un{{/watched}}watched.png" width="76" height="46" />
                        <title>Mark as {{#watched}}un{{/watched}}watched</title>
                    </buttonLockup>
                    {{#partiallyWatched}}
                    <buttonLockup onSelect="Presenter.loadContextWithData('TVShow_SeasonListContext', { watched: false, path: '{{ path }}', title: '{{ title }}}', pmsId: '{{ _.pmsId }}' })">
                        <badge src="{{ _.imagePath }}/markasunwatched.png" width="76" height="46" />
                        <title>Mark as unwatched</title>
                    </buttonLockup>
                    {{/partiallyWatched}}
                    <buttonLockup onSelect="Presenter.loadContextWithData('TVShow_SeasonListContext', { watched: false, path: '{{ path }}', title: '{{ title }}}', pmsId: '{{ _.pmsId }}' })">
                        <seasonBadge>5</seasonBadge>
                        <title>Series</title>
                    </buttonLockup>
				</row>
			</stack>
			<heroImg src="{{ thumb.768 }}" />
		</banner>
		<shelf>
			<header>
				<title>{{ leafCount }} episodes</title>
			</header>
			<section id="episodes">
				{{# episodes }}
				<lockup id="episode{{index}}" onSelect="videoPlayer.play('{{ _.pmsId }}', '{{ path }}')" onHoldSelect="Presenter.loadContextWithData('TVShow_SeasonListSeasonContext', { watched: {{#watched}}false{{/watched}}{{^watched}}true{{/watched}}, partiallyWatched: {{ partiallyWatched }}, path: '{{ path }}', parentPath: '{{ parentPath }}', pmsId: '{{ _.pmsId }}', id: 'season{{index}}' })">
					<img src="{{ thumb.video }}" width="308" height="173" />
				    {{^ watched}}
					<overlay style="tv-align: right;">
						{{# progress }}
						<progressBar value="{{ progress }}" />
						{{/ progress }}
						{{^ progress }}
						<badge src="{{ _.imagePath }}/ribbon_tr.png" style="position: absolute; tv-position: top-right; tv-tint-color: rgba(0,122,255,.9);" width="32" height="32" />
						{{/ progress }}
					</overlay>
					{{/ watched}}
					<title>{{ index }}. {{ title }}</title>
					<relatedContent>
                        <infoTable>
                            <header>
                                <title>{{ title }}</title>
                            </header>
                            <info>
                            	<header>
	                            	<title/>
	                            </header>
                            	<row>
		                            <text>Episode {{ index }}</text>
		                            <text>{{# duration.hours }}{{duration.hours}} hour {{/ duration.hours}}{{# duration.minutes }}{{duration.minutes}} min{{/ duration.minutes}}</text>
		                            <badge src="resource://{{ contentRating }}" class="badge" style="tv-tint-color: rgb(255,255,255)" />
		                            {{# HD}}
		                            <badge src="resource://hd" class="badge" style="tv-tint-color: rgb(255,255,255)" />
		                            {{/ HD}}
		                            <badge src="resource://cc" class="badge" style="tv-tint-color: rgb(255,255,255)" />
		                        </row>
                            </info>
                            <info>
                                <header>
                                    <title>{{ releaseDate }}
                                    	{{ parentGenre }}
                                    </title>
                                </header>
                                <description allowsZooming="true" moreLabel="more" onSelect="Presenter.loadContextWithData('TVShow_SeasonListDescription', { title: '{{ HTMLEscape(title) }}', description: '{{ HTMLEscape(summary) }}'})"><![CDATA[{{ summary }}]]></description>
                            </info>
                        </infoTable>
                    </relatedContent>
				</lockup>
				{{/ episodes }}
			</section>
		</shelf>
	</productBundleTemplate>
</document>